{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Profile | Veloce Car Rental</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{% static 'profile.css' %}">

</head>
<body>
    <!-- Header & Navigation -->
    <header id="header">
        <div class="container navbar">
            <a href="index.html" class="logo">
                <h1>Veloce<span>.</span></h1>
            </a>
            <div class="mobile-toggle">
                <i class="fas fa-bars"></i>
            </div>
            <ul class="nav-links">
                  <li><a href="/">Home</a></li>
                <li><a href="{% url 'car_list' %}">Cars</a></li>
                <li><a href="{% url 'service' %}">Services</a></li>
                <li><a href="{% url 'about' %}">About</a></li>
                <li><a href="{% url 'contact' %}">Contact</a></li>
            </ul>
            
            <!-- Profile Section -->
           
    </header>

   <div class="profile-header">
    <div class="profile-avatar">
        <i class="fas fa-user"></i>
    </div>
    <h2 class="profile-name">{{ user.get_full_name }}</h2>
    <p class="profile-email">{{ user.email }}</p>
    <span class="membership-badge">
        {% if user.is_staff %} Admin {% else %} Premium Member {% endif %}
    </span>
</div>

<div class="profile-menu">
    <a href="{% url 'profile' %}" class="profile-menu-item active">
        <i class="fas fa-user"></i>
        <span>Profile Information</span>
    </a>
    <a href="{% url 'order_history' %}" class="profile-menu-item">
        <i class="fas fa-history"></i>
        <span>Order History</span>
    </a>
    <a href="{% url 'cart' %}" class="profile-menu-item">
    <i class="fas fa-shopping-cart"></i>
    <span>Order Cart ({{ cart_count }})</span>
</a>

    <a href="{% url 'order_history'%}" class="profile-menu-item">
        <i class="fas fa-cog"></i>
        <span>Account Settings</span>
    </a>
    <a href="#" class="profile-menu-item">
        <i class="fas fa-heart"></i>
        <span>Saved Vehicles</span>
    </a>
   <a href="{% url 'logout' %}" class="profile-menu-item">
    <i class="fas fa-sign-out-alt"></i>
    <span>Logout</span>
</a>

    </a>
</div>

        
        <!-- Main Profile Content -->
        <div class="profile-content">
            <!-- Profile Information Section -->
            <div id="profile-info" class="profile-section">
                <div class="profile-section-header">
                    <h2 class="profile-section-title"><i class="fas fa-user-circle"></i> Profile Information</h2>
                    <div class="profile-section-actions">
                        <button class="btn btn-outline"><i class="fas fa-edit"></i> Edit Profile</button>
                    </div>
                </div>
                
               <div class="info-card">
    <div class="info-card-title">Full Name</div>
    <div class="info-card-value">{{ request.user.first_name }} {{ request.user.last_name }}</div>
</div>

<div class="info-card">
    <div class="info-card-title">Email Address</div>
    <div class="info-card-value">{{ request.user.email }}</div>
</div>

<div class="info-card">
    <div class="info-card-title">Phone Number</div>
    <div class="info-card-value">{{ profile.phone_number }}</div>
</div>

<div class="info-card">
    <div class="info-card-title">Membership Level</div>
    <div class="info-card-value">{{ profile.membership_level }}</div>
</div>

<div class="info-card">
    <div class="info-card-title">Address</div>
    <div class="info-card-value">{{ profile.address }}</div>
</div>

<div class="info-card">
    <div class="info-card-title">Date of Birth</div>
    <div class="info-card-value">{{ profile.date_of_birth }}</div>
</div>

<div class="info-card">
    <div class="info-card-title">Licence Number</div>
    <div class="info-card-value">{{ profile.license_number }}</div>
</div>

            <!-- Order History Section (hidden by default) -->
            <div id="order-history" class="profile-section" style="display: none;">
                <div class="profile-section-header">
                    <h2 class="profile-section-title"><i class="fas fa-history"></i> Order History</h2>
                    <div class="profile-section-actions">
                        <button class="btn btn-outline"><i class="fas fa-download"></i> Export History</button>
                    </div>
                </div>
                
                <div class="profile-section-body">
                    <div class="orders-list">
                        <!-- Order 1 -->
                        <div class="order-card animate-fade">
                            <div class="order-header">
                                <div>
                                    <div class="order-id">Order #VLC-789456</div>
                                    <div class="order-date">Booked on: Oct 15, 2023</div>
                                </div>
                                <div class="order-status status-completed">Completed</div>
                            </div>
                            
                            <div class="order-body">
                                <div class="order-image">
                                    <img src="https://images.unsplash.com/photo-1542362567-b07e54358754?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="Luxury Sedan">
                                </div>
                                <div class="order-details">
                                    <div class="order-vehicle">Luxury Sedan</div>
                                    <div class="order-dates">
                                        <div class="order-pickup">
                                            <strong>Pickup:</strong> Oct 20, 2023 - 9:00 AM
                                            <div class="order-location"><i class="fas fa-map-marker-alt"></i> JFK Airport</div>
                                        </div>
                                        <div class="order-return">
                                            <strong>Return:</strong> Oct 25, 2023 - 3:00 PM
                                            <div class="order-location"><i class="fas fa-map-marker-alt"></i> Manhattan Office</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="order-footer">
                                <div class="order-total">$445.00</div>
                                <div class="order-actions">
                                    <button class="order-action-btn view-btn">View Details</button>
                                    <button class="order-action-btn">Rebook</button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Order 2 -->
                        <div class="order-card animate-fade">
                            <div class="order-header">
                                <div>
                                    <div class="order-id">Order #VLC-123789</div>
                                    <div class="order-date">Booked on: Sep 28, 2023</div>
                                </div>
                                <div class="order-status status-confirmed">Confirmed</div>
                            </div>
                            
                            <div class="order-body">
                                <div class="order-image">
                                    <img src="https://images.unsplash.com/photo-1553481187-be93c21490a9?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="Premium SUV">
                                </div>
                                <div class="order-details">
                                    <div class="order-vehicle">Premium SUV</div>
                                    <div class="order-dates">
                                        <div class="order-pickup">
                                            <strong>Pickup:</strong> Oct 5, 2023 - 10:00 AM
                                            <div class="order-location"><i class="fas fa-map-marker-alt"></i> Manhattan Office</div>
                                        </div>
                                        <div class="order-return">
                                            <strong>Return:</strong> Oct 10, 2023 - 4:00 PM
                                            <div class="order-location"><i class="fas fa-map-marker-alt"></i> JFK Airport</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="order-footer">
                                <div class="order-total">$595.00</div>
                                <div class="order-actions">
                                    <button class="order-action-btn view-btn">View Details</button>
                                    <button class="order-action-btn cancel-btn">Cancel</button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Order 3 -->
                        <div class="order-card animate-fade">
                            <div class="order-header">
                                <div>
                                    <div class="order-id">Order #VLC-456123</div>
                                    <div class="order-date">Booked on: Aug 12, 2023</div>
                                </div>
                                <div class="order-status status-pending">Pending Review</div>
                            </div>
                            
                            <div class="order-body">
                                <div class="order-image">
                                    <img src="https://images.unsplash.com/photo-1552519507-da3b142c6eef?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="Sports Car">
                                </div>
                                <div class="order-details">
                                    <div class="order-vehicle">Sports Car</div>
                                    <div class="order-dates">
                                        <div class="order-pickup">
                                            <strong>Pickup:</strong> Aug 20, 2023 - 8:00 AM
                                            <div class="order-location"><i class="fas fa-map-marker-alt"></i> Manhattan Office</div>
                                        </div>
                                        <div class="order-return">
                                            <strong>Return:</strong> Aug 25, 2023 - 5:00 PM
                                            <div class="order-location"><i class="fas fa-map-marker-alt"></i> Manhattan Office</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="order-footer">
                                <div class="order-total">$745.00</div>
                                <div class="order-actions">
                                    <button class="order-action-btn view-btn">View Details</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Order Cart Section (hidden by default) -->
            <div id="order-cart" class="profile-section" style="display: none;">
                <div class="profile-section-header">
                    <h2 class="profile-section-title"><i class="fas fa-shopping-cart"></i> Order Cart</h2>
                    <div class="profile-section-actions">
                        <button class="btn"><i class="fas fa-check-circle"></i> Complete Booking</button>
                    </div>
                </div>
                
                <div class="profile-section-body">
                    <div class="cart-item">
                        <div class="cart-image">
                            <img src="https://images.unsplash.com/photo-1553481187-be93c21490a9?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="Premium SUV">
                        </div>
                        <div class="cart-details">
                            <div class="cart-vehicle">Premium SUV</div>
                            <div class="cart-dates">
                                <div class="cart-pickup">
                                    <strong>Pickup:</strong> Oct 15, 2023 - 9:00 AM
                                    <div class="cart-location"><i class="fas fa-map-marker-alt"></i> JFK Airport</div>
                                </div>
                                <div class="cart-return">
                                    <strong>Return:</strong> Oct 20, 2023 - 3:00 PM
                                    <div class="cart-location"><i class="fas fa-map-marker-alt"></i> Manhattan Office</div>
                                </div>
                            </div>
                        </div>
                        <div class="cart-price">
                            <div class="cart-total">$595.00</div>
                            <div class="cart-actions">
                                <button class="cart-action-btn edit-btn">Edit</button>
                                <button class="cart-action-btn remove-btn">Remove</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="cart-item">
                        <div class="cart-image">
                            <img src="https://images.unsplash.com/photo-1503376780353-7e6692767b70?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="Economy Car">
                        </div>
                        <div class="cart-details">
                            <div class="cart-vehicle">Economy Car</div>
                            <div class="cart-dates">
                                <div class="cart-pickup">
                                    <strong>Pickup:</strong> Nov 1, 2023 - 10:00 AM
                                    <div class="cart-location"><i class="fas fa-map-marker-alt"></i> Manhattan Office</div>
                                </div>
                                <div class="cart-return">
                                    <strong>Return:</strong> Nov 5, 2023 - 4:00 PM
                                    <div class="cart-location"><i class="fas fa-map-marker-alt"></i> JFK Airport</div>
                                </div>
                            </div>
                        </div>
                        <div class="cart-price">
                            <div class="cart-total">$236.00</div>
                            <div class="cart-actions">
                                <button class="cart-action-btn edit-btn">Edit</button>
                                <button class="cart-action-btn remove-btn">Remove</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="cart-summary">
                        <div class="summary-row">
                            <span>Subtotal (2 items):</span>
                            <span>$831.00</span>
                        </div>
                        <div class="summary-row">
                            <span>Tax (8.875%):</span>
                            <span>$73.76</span>
                        </div>
                        <div class="summary-row">
                            <span>Service Fee:</span>
                            <span>$25.00</span>
                        </div>
                        <div class="summary-total">
                            <span>Total:</span>
                            <span>$929.76</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Header scroll effect
        window.addEventListener('scroll', function() {
            const header = document.getElementById('header');
            if (window.scrollY > 100) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        });

        // Mobile menu toggle
        const mobileToggle = document.querySelector('.mobile-toggle');
        const navLinks = document.querySelector('.nav-links');
        
        mobileToggle.addEventListener('click', function() {
            navLinks.classList.toggle('active');
            this.innerHTML = navLinks.classList.contains('active') ? 
                '<i class="fas fa-times"></i>' : '<i class="fas fa-bars"></i>';
        });

        // Close mobile menu when clicking a link
        document.querySelectorAll('.nav-links a').forEach(link => {
            link.addEventListener('click', () => {
                navLinks.classList.remove('active');
                mobileToggle.innerHTML = '<i class="fas fa-bars"></i>';
            });
        });

        // Profile menu navigation
        const menuItems = document.querySelectorAll('.profile-menu-item');
        const profileSections = document.querySelectorAll('.profile-section');
        
        menuItems.forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Update active menu item
                menuItems.forEach(i => i.classList.remove('active'));
                this.classList.add('active');
                
                // Show corresponding section
                const targetId = this.getAttribute('href')?.replace('#', '') || 
                                this.querySelector('span').textContent.toLowerCase().replace(' ', '-');
                
                profileSections.forEach(section => {
                    section.style.display = 'none';
                });
                
                document.getElementById(targetId).style.display = 'block';
            });
        });
        
        // Set initial active section (Profile Information)
        document.getElementById('profile-info').style.display = 'block';
        
        // Edit profile button
        document.querySelector('.btn-outline').addEventListener('click', function() {
            alert('Edit profile functionality would open a modal or navigate to edit page in a real implementation.');
        });
        
        // Save changes button
        document.querySelector('.btn-save').addEventListener('click', function() {
            alert('Profile updated successfully!');
        });
        
        // Order actions
        document.querySelectorAll('.view-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const orderCard = this.closest('.order-card');
                const orderId = orderCard.querySelector('.order-id').textContent;
                alert(`Viewing details for ${orderId}`);
            });
        });
        
        document.querySelectorAll('.cancel-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                if (confirm('Are you sure you want to cancel this booking?')) {
                    const orderCard = this.closest('.order-card');
                    orderCard.style.opacity = '0.5';
                    setTimeout(() => {
                        orderCard.style.display = 'none';
                        alert('Booking cancelled successfully.');
                    }, 300);
                }
            });
        });
        
        // Cart actions
        document.querySelectorAll('.remove-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const cartItem = this.closest('.cart-item');
                if (confirm('Are you sure you want to remove this item from your cart?')) {
                    cartItem.style.opacity = '0';
                    setTimeout(() => {
                        cartItem.remove();
                        alert('Item removed from cart.');
                        
                        // If cart is now empty
                        if (document.querySelectorAll('.cart-item').length === 0) {
                            const emptyCart = document.createElement('div');
                            emptyCart.className = 'empty-cart';
                            emptyCart.innerHTML = `
                                <div style="text-align: center; padding: 2rem;">
                                    <i class="fas fa-shopping-cart" style="font-size: 3rem; color: #cbd5e0; margin-bottom: 1rem;"></i>
                                    <h3>Your cart is empty</h3>
                                    <p>Looks like you haven't added any vehicles to your cart yet.</p>
                                    <a href="cars.html" class="btn" style="margin-top: 1rem;">Browse Vehicles</a>
                                </div>
                            `;
                            document.querySelector('.profile-section-body').appendChild(emptyCart);
                        }
                    }, 300);
                }
            });
        });
        
        // Complete booking button
        document.querySelector('.profile-section-actions .btn').addEventListener('click', function() {
            alert('Booking completed successfully! You will receive a confirmation email shortly.');
            // In a real implementation, this would process payment and create the booking
        });
    </script>
</body>
</html>